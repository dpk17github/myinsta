<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Reward Scratch Card</title>

  <style>
    body{
      margin:0;
      font-family:Segoe UI, Arial;
      background:linear-gradient(135deg,#ff9a9e,#fad0c4);
      display:flex;
      justify-content:center;
      align-items:center;
      min-height:100vh;
      padding:20px;
    }

    .card{
      width:360px;
      max-width:92vw;
      background:white;
      padding:28px;
      border-radius:20px;
      box-shadow:0 10px 30px rgba(0,0,0,0.25);
      text-align:center;
    }

    .title{
      font-size:26px;
      font-weight:800;
      margin-bottom:15px;
    }

    .scratch-wrap{
      position:relative;
      width:100%;
      max-width:320px;
      margin:auto;
      height:120px;
    }

    #rewardText{
      position:absolute;
      inset:0;
      display:flex;
      justify-content:center;
      align-items:center;
      font-size:28px;
      font-weight:900;
      color:#d12c4b;
      opacity:0;
      transition:0.5s;
      pointer-events:none;
      z-index:2;
    }

    #scratchCanvas{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      z-index:3;
      border-radius:16px;
    }
  </style>
</head>

<body>

  <div class="card">
    <div class="title">Your Reward ðŸŽ‰</div>

    <div class="scratch-wrap">
      <div id="rewardText">â‚¹100 Reward</div>
      <canvas id="scratchCanvas" width="320" height="120"></canvas>
    </div>
  </div>


<script>
  const canvas = document.getElementById("scratchCanvas");
  const ctx = canvas.getContext("2d");
  const reward = document.getElementById("rewardText");

  // Silver foil
  const grad = ctx.createLinearGradient(0,0,canvas.width,canvas.height);
  grad.addColorStop(0,"#d6d6d6");
  grad.addColorStop(0.5,"#bfbfbf");
  grad.addColorStop(1,"#e5e5e5");

  ctx.fillStyle = grad;
  ctx.fillRect(0,0,canvas.width,canvas.height);

  ctx.globalCompositeOperation = "destination-out";

  let scratching = false;
  let done = false;

  function pos(e){
    const r = canvas.getBoundingClientRect();
    let x,y;
    if(e.touches){
      x = e.touches[0].clientX - r.left;
      y = e.touches[0].clientY - r.top;
    } else {
      x = e.clientX - r.left;
      y = e.clientY - r.top;
    }
    return {x,y};
  }

  function scratch(e){
    if(!scratching) return;

    const {x,y} = pos(e);
    ctx.beginPath();
    ctx.arc(x,y,20,0,Math.PI*2);
    ctx.fill();

    checkReveal();
  }

  function checkReveal(){
    if(done) return;

    const pixels = ctx.getImageData(0,0,canvas.width,canvas.height).data;
    let cleared = 0;

    for(let i=3;i<pixels.length;i+=4){
      if(pixels[i] === 0) cleared++;
    }

    const percent = cleared / (canvas.width*canvas.height) * 100;

    if(percent > 40){
      reward.style.opacity = 1;
      done = true;
      confetti();
    }
  }

  canvas.addEventListener("mousedown", ()=> scratching=true);
  canvas.addEventListener("mouseup", ()=> scratching=false);
  canvas.addEventListener("mousemove", scratch);

  canvas.addEventListener("touchstart", ()=> scratching=true);
  canvas.addEventListener("touchend", ()=> scratching=false);
  canvas.addEventListener("touchmove", scratch);


  function confetti(){
    const colors = ["#ff2e63","#ffa600","#00c2ff","#20e3b2","#ff4f5e"];

    for(let i=0;i<100;i++){
      const p = document.createElement("div");
      p.style.position="fixed";
      p.style.width="8px";
      p.style.height="8px";
      p.style.background = colors[Math.floor(Math.random()*colors.length)];
      p.style.top="50%";
      p.style.left="50%";
      p.style.borderRadius="2px";
      p.style.pointerEvents="none";
      document.body.appendChild(p);

      const angle = Math.random()*2*Math.PI;
      const dist = Math.random()*250 + 80;
      const x = Math.cos(angle)*dist;
      const y = Math.sin(angle)*dist;

      p.animate([
        {transform:"translate(0,0)", opacity:1},
        {transform:`translate(${x}px,${y}px)`, opacity:0}
      ],{duration:900, easing:"ease-out"});

      setTimeout(()=>p.remove(),900);
    }
  }
</script>

</body>
</html>
